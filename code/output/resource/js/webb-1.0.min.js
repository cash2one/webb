!function(){if(WCL&&WCL.globalLogFlag&&WCL.did&&WCL.lid&&(WCL.pathHTTP&&WCL.pathHTTPS||WCL.productID)){var t=function(){this.start=null,this.debug=!1,this.dataStore={},this.t=null,this.cycle=null,this.MIN_SPEED=2e3,this.MAX_SPEED=1e4,this.curSpeed=5e3,this.stayTime=0,this.MAX_LEN=2e3,this.storeLen=-1,this.MAX_SEND=100,this.hostEnum={SESTAT:0},this.keyMap={input:0,disp:0,view:0,user:0,heart:0},this.hostAddr=[-1===location.protocol.indexOf("https")?WCL.pathHTTP||"http://sestat.baidu.com/owb.gif?":WCL.pathHTTPS||"https://sp1.baidu.com/5b1ZeDe5KgQFm2e88IuM_a/owb.gif?"],this.commLog={},this.isFirst=!0,this.sendNum={},this.init()};$.extend(t.prototype,{setCommLog:function(t,e,i){if(!WCL)return!1;if(!(t in this.commLog)){var n={};e&&i?(n.log=e,n.len=i):(n.log="&pid="+(WCL.productID||0),n.log+="&qid="+WCL.lid+"&did="+WCL.did,n.len=(n.log+"&t="+(new Date).getTime()).length),this.commLog[t]=n}return!0},preInit:function(){this.start=(new Date).getTime(),this.cycle=null,null!==this.t&&clearTimeout(this.t),this.t=null,this.storeLen=-1;var t=WCL&&WCL.lid?WCL.lid:"";t&&(this.setCommLog(t),this.sendNum[t]=0)},flushData:function(t){null!==this.t&&(clearTimeout(this.t),this.t=null);var e=this.fetchData(t,!0);this.startSend(e,!0)},init:function(){var t=this;t.preInit(),$(window).on("unload",function(){WCL&&1===WCL.globalLogFlag&&t.flushData(2)})},send:function(t,e,i){if(!t)return!1;this.debug;var n="",s="",o="";if("object"==typeof t){for(var a in t)n=t[a],"object"==typeof n&&(n=JSON.stringify(n)),s+=a+"="+encodeURIComponent(n)+"&";s=s.substring(0,s.length-1)}else"string"==typeof t&&(s=t);if(!i&&WCL&&WCL.lid&&(i=WCL.lid),!(i&&i in this.commLog))return!1;if(s+=this.commLog[i].log,s+="&t="+(new Date).getTime(),("number"!=typeof e||0>e||e>=this.hostAddr.length)&&(e=0),o=this.hostAddr[e]+s,o.length>this.MAX_LEN)return!1;var r=window["BD_PS_C"+(new Date).getTime()]=new Image;return r.src=this.hostAddr[e]+s,!0},sendNow:function(t,e,i){if(t&&"string"==typeof t&&t in this.keyMap&&e){var n="type=3&fm="+t+"&data="+encodeURIComponent(JSON.stringify([e]));i&&i.qid&&i.log&&i.len?(this.setCommLog(i.qid,i.log,i),this.send(n,this.keyMap[t],i.qid)):this.send(n,this.keyMap[t])}},pushData:function(t,e,i){var n=WCL&&WCL.lid?WCL.lid:"";if(!n)return!1;i&&i.qid&&i.log&&i.len?(this.setCommLog(i.qid,i.log,i.len),n=i.qid):this.setCommLog(n),n in this.dataStore||(this.dataStore[n]={});var s=this.dataStore[n];t in s||(s[t]=[[],[]]),i&&i.level===!0?s[t][0].push(encodeURIComponent(JSON.stringify(e))):s[t][1].push(encodeURIComponent(JSON.stringify(e)))},fetchData:function(t,e){function i(){for(var e,i=0,n=[],o=!1,l=this.commLog[u].len,c=this.hostAddr[r].length,f=c+("type="+t+"&fm="+d+"&data=").length+l,g=f+6,p=g;0!==s.length&&i<this.MAX_SEND;)h===!1&&0===t&&i++,e=s.shift(),n.push(e),p=g+e.length+3,(g>=this.MAX_LEN||p>=this.MAX_LEN)&&(n.length>=2&&(n.pop(),o=!0),a.push({qid:u,key:d,type:t,data:"%5B"+n.join("%2C")+"%5D",host:r}),n=[],o&&(n[0]=e,o=!1),p=n.length>0?f+3+e.length+3:f+6),g=p;n.length>0&&a.push({qid:u,key:d,type:t,data:"%5B"+n.join("%2C")+"%5D",host:r})}var n,s,o=this.dataStore,a=[],r=0,h=!1,l=WCL&&WCL.lid?WCL.lid:"";if(!l)return[];for(var u in o){h=u!==l?!0:!1,n=o[u];for(var d in n)d in this.keyMap&&(r=this.keyMap[d],"number"==typeof r&&void 0!==this.hostAddr[r]&&(s=n[d][0].length>0?n[d][0]:n[d][1],i.call(this),(h===!0||e!==!0)&&0===s.length&&n[d][1].length>0&&(s=n[d][1],i.call(this)),h===!0&&delete this.dataStore[u]))}return a},startSend:function(t,e){var i,n,s=this,o=100;if(e)for(var a=0;a<t.length;a++){if(i=t.shift(),!(i&&i.qid&&i.qid in s.commLog))return;n="type="+i.type+"&fm="+i.key+"&data="+i.data,s.send(n,i.host,i.qid)}else var r=setInterval(function(){return t.length<=0?void clearInterval(r):(i=t.shift(),void(i&&i.qid&&i.qid in s.commLog&&(n="type="+i.type+"&fm="+i.key+"&data="+i.data,s.send(n,i.host,i.qid),i.qid in s.sendNum&&(s.sendNum[i.qid]+=1))))},o)},startCycle:function(){var t=this;null===t.cycle&&(t.cycle=1),t.t=setTimeout(function(){var e=t.fetchData(0),i=e.length;-1===t.storeLen&&(t.storeLen=i),0!==t.storeLen&&i/t.storeLen>=2&&t.curSpeed>t.MIN_SPEED&&(t.curSpeed-=1e3),(0===i||t.storeLen/i>=2)&&t.curSpeed<t.MAX_SPEED&&(t.curSpeed+=1e3),t.startSend(e,0),t.startCycle()},t.curSpeed)},sendPack:function(t,e,i){t&&"string"==typeof t&&t in this.keyMap&&e&&(this.pushData(t,e,i),null===this.cycle&&this.startCycle())}}),"function"==typeof define&&define.amd?define("wcl/webb",["require"],function(){return t}):WCL.Webb=new t}}(),define("wcl/webb-ia",["wcl/webb"],function(t){var e=new t,i=(new Date).getTime(),n=0,s=null,o={},a=function(t){this.webb=e,this.group=0,this.start=null,this.stayTime=0,this.heartTime=[],this.heartTimer=null,this.scrollTimer=null,this.resizeTimer=null,this.flag=o,this.options={useBase:!1,useFocus:!1,useBlur:!1,useHeart:!1,useVsb:!1},this._init(t)};return $.extend(a.prototype,{send:function(t){t.t||(t.t=(new Date).getTime()),t.o=n,n+=1,t.g=this.group,this._setHistory(t),this.webb.sendPack("view",t)},sendNow:function(t){t.t||(t.t=(new Date).getTime()),t.o=n,n+=1,t.g=this.group,this._setHistory(t),this.webb.sendNow("view",t)},_init:function(t){this.start=i;for(var e in t)this.options[e]=t[e];this.group=this._getRandomNum()||0,this._initEvents()},_getRandomNum:function(){var t=89999*Math.random()+1e4;return t=parseInt(t,10)},_setHistory:function(t){if(t.type){var e=t.type,i=t.action?t.action:"";"w"==e&&i&&(e="w_"+i),s?s[e]?s[e]++:s[e]=1:(s={},s[e]=1)}},_sendFocusLog:function(){var t=this;t.send({type:"w",action:"focus",ext:{vsb:document.visibilityState?document.visibilityState:0}})},_sendBlurLog:function(){var t=this;t.send({type:"w",action:"blur",ext:{vsb:document.visibilityState?document.visibilityState:0}})},_sendVisibilitychangeLog:function(){var t=this;t.send({type:"w",action:"vsb",ext:{vsb:document.visibilityState?document.visibilityState:0}})},_initEvents:function(){var t=this,e=$(window);!t.options.useBase&&!t.options.useFocus||t.flag.focus||(e.bind("focus.webb_ia",function(){t._sendFocusLog()}),t.flag.focus=1),!t.options.useBase&&!t.options.useBlur||t.flag.blur||(e.bind("blur.webb_ia",function(){t._sendBlurLog()}),t.flag.blur=1),!t.options.useBase&&!t.options.useVsb||t.flag.vsb||($(document).bind("visibilitychange.webb_ia",function(){t._sendVisibilitychangeLog()}),t.flag.vsb=1),!t.options.useBase&&!t.options.useResize||t.flag.resize||(e.bind("resize.webb_ia",function(e){t.collectPoint("resize",e)}),t.flag.resize=1),!t.options.useBase&&!t.options.useHeart||t.flag.heart||(t.startHeart(),t.flag.heart=1),!t.options.useBase&&!t.options.useScroll||t.flag.scroll||(e.bind("scroll",function(e){t.collectPoint("scroll",e)}),t.flag.scroll=1)},destory:function(){$(window).unbind(".useraction"),null!==this.heartTimer&&clearTimeout(this.heartTimer),this.heartTimer=null},fb:function(){var t,e=this.heartTime.length;return t=0===e||1===e?3e3:this.heartTime[e-1]+this.heartTime[e-2],this.heartTime.push(t),t},sendHeart:function(t){var e=(new Date).getTime(),i=0===t?this.stayTime:e-this.start,n={type:"heart",stay_time:i,t:e};s&&(n.hist=s),this.sendNow(n)},startHeart:function(){var t=this,e=t.fb();t.stayTime+=e,t.heartTimer=setTimeout(function(){t.sendHeart(0),t.startHeart()},e)},collectPoint:function(t){function e(){s[n]=setTimeout(function(){s.send(i(t)),s[n]=null},1e3)}function i(t){if("scroll"===t){var e=$(window),i=e.scrollTop(),n=e.scrollLeft();return{type:"w",action:"scroll",ext:{y:i,x:n}}}return"resize"===t?{type:"w",action:"resize",ext:{w:$(window).width(),h:$(window).height()}}:void 0}var n=t+"Timer",s=this;null===s[n]&&e()}}),a}),define("wcl/webb-disp",["wcl/webb"],function(t){var e=new t,i={},n=function(){var t=this;t.webb=e,t._flag=i,t.display={},t.expand={},t._init()};return $.extend(n.prototype,{send:function(t){t.t||(t.t=(new Date).getTime()),this.webb.sendPack("disp",t)},sendNow:function(t){t.t||(t.t=(new Date).getTime()),this.webb.sendNow("disp",t)},_init:function(){var t=this;t.display.base=t.getBase(),this._initEvents()},_initEvents:function(){var t=this;t._flag.disp||(t.sendDisp(),t._flag.disp=1)},sendDisp:function(){var t=this;for(var e in t.display){var i={};i[e]=t.display[e],t.sendNow(i)}},getBase:function(){var t={};return t.size={},t.size.doc={w:$(document).width(),h:$(document).height()},t.size.wind={w:$(window).width(),h:$(window).height()},t.size.scr={w:screen.width,h:screen.height},t.vsb=document.visibilityState?document.visibilityState:0,t}}),n});